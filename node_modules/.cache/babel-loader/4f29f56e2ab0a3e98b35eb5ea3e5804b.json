{"ast":null,"code":"import _slicedToArray from\"C:/Users/linar/praktikumLenovo/diplom/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from\"react\";import{useLocation,Link}from\"react-router-dom\";import\"./MoviesCard.css\";import{MovieContext}from\"../../../contexts/MovieContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MoviesCard(_ref){var title=_ref.title,duration=_ref.duration,backdrop=_ref.backdrop,isSaved=_ref.isSaved;var _useState=useState(isSaved),_useState2=_slicedToArray(_useState,2),favourites=_useState2[0],setFavourites=_useState2[1];var _useContext=useContext(MovieContext),addMovie=_useContext.addMovie,deleteMovie=_useContext.deleteMovie;var location=useLocation();var _useState3=useState(location.pathname===\"/saved-movies\"),_useState4=_slicedToArray(_useState3,2),isFavoritesRoute=_useState4[0],setIsFavoritesRoute=_useState4[1];function handleClick(event){event.preventDefault();if(favourites){deleteMovie(title);}else{addMovie({title:title,duration:duration,backdrop:backdrop});}setFavourites(!favourites);}function handleDeleteMovie(){deleteMovie(title);}useEffect(function(){setIsFavoritesRoute(location.pathname===\"/saved-movies\");},[location.pathname]);function formatDuration(duration){var hours=Math.floor(duration/60);var minutes=duration%60;var hoursString=hours>0?\"\".concat(hours,\"\\u0447\"):\"\";var minutesString=minutes>0?\"\".concat(minutes,\"\\u043C\"):\"\";return\"\".concat(hoursString,\" \").concat(minutesString).trim();}return/*#__PURE__*/_jsxs(\"li\",{className:\"movies-card\",children:[/*#__PURE__*/_jsx(Link,{className:\"movies-card__link\",to:\"https://www.youtube.com/watch?v=6UgY1aEhY2c\",target:\"_blank\"}),/*#__PURE__*/_jsx(\"img\",{className:\"movies-card__backdrop\",src:backdrop,alt:\"\\u041A\\u0430\\u0434\\u0440 \\u0438\\u0437 \\u0444\\u0438\\u043B\\u044C\\u043C\\u0430: \".concat(title)}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-card__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"movies-card__wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"movies-card__title\",children:title}),!isFavoritesRoute&&/*#__PURE__*/_jsx(\"button\",{className:\"movies-card__favorites-btn link \".concat(favourites?\"active\":\"\"),type:\"button\",onClick:handleClick}),isFavoritesRoute&&/*#__PURE__*/_jsx(\"button\",{className:\"movies-card__favorites-btn link remove-btn\",type:\"button\",onClick:handleDeleteMovie})]})}),/*#__PURE__*/_jsx(\"span\",{className:\"movies-card__duration\",children:formatDuration(duration)})]});}export default MoviesCard;","map":{"version":3,"names":["React","useState","useContext","useEffect","useLocation","Link","MovieContext","MoviesCard","title","duration","backdrop","isSaved","favourites","setFavourites","addMovie","deleteMovie","location","pathname","isFavoritesRoute","setIsFavoritesRoute","handleClick","event","preventDefault","handleDeleteMovie","formatDuration","hours","Math","floor","minutes","hoursString","minutesString","trim"],"sources":["C:/Users/linar/praktikumLenovo/diplom/movies-explorer-frontend/src/components/Movies/MoviesCard/MoviesCard.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { useLocation, Link } from \"react-router-dom\";\n\nimport \"./MoviesCard.css\";\nimport { MovieContext } from \"../../../contexts/MovieContext\";\n\nfunction MoviesCard({ title, duration, backdrop, isSaved }) {\n  const [favourites, setFavourites] = useState(isSaved);\n  const { addMovie, deleteMovie } = useContext(MovieContext);\n  const location = useLocation();\n  const [isFavoritesRoute, setIsFavoritesRoute] = useState(\n    location.pathname === \"/saved-movies\"\n  );\n\n  function handleClick(event) {\n    event.preventDefault();\n    if (favourites) {\n      deleteMovie(title);\n    } else {\n      addMovie({ title, duration, backdrop });\n    }\n    setFavourites(!favourites);\n  }\n\n  function handleDeleteMovie() {\n    deleteMovie(title);\n  }\n\n  useEffect(() => {\n    setIsFavoritesRoute(location.pathname === \"/saved-movies\");\n  }, [location.pathname]);\n\n  function formatDuration(duration) {\n    const hours = Math.floor(duration / 60);\n    const minutes = duration % 60;\n\n    const hoursString = hours > 0 ? `${hours}ч` : \"\";\n    const minutesString = minutes > 0 ? `${minutes}м` : \"\";\n\n    return `${hoursString} ${minutesString}`.trim();\n  }\n\n  return (\n    <li className=\"movies-card\">\n      <Link\n        className=\"movies-card__link\"\n        to={\"https://www.youtube.com/watch?v=6UgY1aEhY2c\"}\n        target=\"_blank\"\n      ></Link>\n      <img\n        className=\"movies-card__backdrop\"\n        src={backdrop}\n        alt={`Кадр из фильма: ${title}`}\n      />\n      <div className=\"movies-card__container\">\n        <div className=\"movies-card__wrapper\">\n          <h2 className=\"movies-card__title\">{title}</h2>\n\n          {!isFavoritesRoute && (\n            <button\n              className={`movies-card__favorites-btn link ${favourites ? \"active\" : \"\"\n                }`}\n              type=\"button\"\n              onClick={handleClick}\n            ></button>\n          )}\n          {isFavoritesRoute && (\n            <button\n              className={`movies-card__favorites-btn link remove-btn`}\n              type=\"button\"\n              onClick={handleDeleteMovie}\n            ></button>\n          )}\n        </div>\n      </div>\n      <span className=\"movies-card__duration\">\n        {formatDuration(duration)}\n      </span>\n    </li>\n  );\n}\n\nexport default MoviesCard;\n"],"mappings":"oJAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,OAASC,WAAT,CAAsBC,IAAtB,KAAkC,kBAAlC,CAEA,MAAO,kBAAP,CACA,OAASC,YAAT,KAA6B,gCAA7B,C,wFAEA,QAASC,WAAT,MAA4D,IAAtCC,MAAsC,MAAtCA,KAAsC,CAA/BC,QAA+B,MAA/BA,QAA+B,CAArBC,QAAqB,MAArBA,QAAqB,CAAXC,OAAW,MAAXA,OAAW,CAC1D,cAAoCV,QAAQ,CAACU,OAAD,CAA5C,wCAAOC,UAAP,eAAmBC,aAAnB,eACA,gBAAkCX,UAAU,CAACI,YAAD,CAA5C,CAAQQ,QAAR,aAAQA,QAAR,CAAkBC,WAAlB,aAAkBA,WAAlB,CACA,GAAMC,SAAQ,CAAGZ,WAAW,EAA5B,CACA,eAAgDH,QAAQ,CACtDe,QAAQ,CAACC,QAAT,GAAsB,eADgC,CAAxD,yCAAOC,gBAAP,eAAyBC,mBAAzB,eAIA,QAASC,YAAT,CAAqBC,KAArB,CAA4B,CAC1BA,KAAK,CAACC,cAAN,GACA,GAAIV,UAAJ,CAAgB,CACdG,WAAW,CAACP,KAAD,CAAX,CACD,CAFD,IAEO,CACLM,QAAQ,CAAC,CAAEN,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAmBC,QAAQ,CAARA,QAAnB,CAAD,CAAR,CACD,CACDG,aAAa,CAAC,CAACD,UAAF,CAAb,CACD,CAED,QAASW,kBAAT,EAA6B,CAC3BR,WAAW,CAACP,KAAD,CAAX,CACD,CAEDL,SAAS,CAAC,UAAM,CACdgB,mBAAmB,CAACH,QAAQ,CAACC,QAAT,GAAsB,eAAvB,CAAnB,CACD,CAFQ,CAEN,CAACD,QAAQ,CAACC,QAAV,CAFM,CAAT,CAIA,QAASO,eAAT,CAAwBf,QAAxB,CAAkC,CAChC,GAAMgB,MAAK,CAAGC,IAAI,CAACC,KAAL,CAAWlB,QAAQ,CAAG,EAAtB,CAAd,CACA,GAAMmB,QAAO,CAAGnB,QAAQ,CAAG,EAA3B,CAEA,GAAMoB,YAAW,CAAGJ,KAAK,CAAG,CAAR,WAAeA,KAAf,WAA0B,EAA9C,CACA,GAAMK,cAAa,CAAGF,OAAO,CAAG,CAAV,WAAiBA,OAAjB,WAA8B,EAApD,CAEA,MAAO,UAAGC,WAAH,aAAkBC,aAAlB,EAAkCC,IAAlC,EAAP,CACD,CAED,mBACE,YAAI,SAAS,CAAC,aAAd,wBACE,KAAC,IAAD,EACE,SAAS,CAAC,mBADZ,CAEE,EAAE,CAAE,6CAFN,CAGE,MAAM,CAAC,QAHT,EADF,cAME,YACE,SAAS,CAAC,uBADZ,CAEE,GAAG,CAAErB,QAFP,CAGE,GAAG,uFAAqBF,KAArB,CAHL,EANF,cAWE,YAAK,SAAS,CAAC,wBAAf,uBACE,aAAK,SAAS,CAAC,sBAAf,wBACE,WAAI,SAAS,CAAC,oBAAd,UAAoCA,KAApC,EADF,CAGG,CAACU,gBAAD,eACC,eACE,SAAS,2CAAqCN,UAAU,CAAG,QAAH,CAAc,EAA7D,CADX,CAGE,IAAI,CAAC,QAHP,CAIE,OAAO,CAAEQ,WAJX,EAJJ,CAWGF,gBAAgB,eACf,eACE,SAAS,6CADX,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAEK,iBAHX,EAZJ,GADF,EAXF,cAgCE,aAAM,SAAS,CAAC,uBAAhB,UACGC,cAAc,CAACf,QAAD,CADjB,EAhCF,GADF,CAsCD,CAED,cAAeF,WAAf"},"metadata":{},"sourceType":"module"}